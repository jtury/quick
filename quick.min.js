// Â©2021 James Tury. Licensed under the MIT license. Contribute at https://github.com/jtury/quick
"use strict";let r,c=[],t="main",tk="title",pk="page_content",th="text/html";const p=new DOMParser;function f(n){if(c.findIndex(i=>i[0].includes(n))===-1){if(n+="/index.html",r=new XMLHttpRequest,!r){return!1}r.onreadystatechange=function(){if(r.readyState===XMLHttpRequest.DONE){if(r.status===200){c.push([r.responseURL.replace("index.html",""),{tk:p.parseFromString(r.responseText,th).getElementsByTagName(tk)[0].innerHTML,pk:p.parseFromString(r.responseText,th).getElementsByTagName(t)[0].innerHTML}])}else{return!1}}},r.open("GET",n),r.send()}return!0}function s(n){return n.shiftKey||n.ctrlKey||n.altKey||n.metaKey}function a(){Array.from(document.getElementsByTagName("a")).forEach(e=>{e.href&&new URL(e.href).origin===location.origin&&(e.addEventListener("pointerenter",function(){setTimeout(function(){e.matches(":hover")&&f(e.href)},85)}),e.addEventListener("pointerdown",function(i){s(i)||(i.preventDefault(),f(e.href))}),e.addEventListener("click",function(i){if(!s(i)){if(i.preventDefault(),f(e.href)===!0){let o=e.href;dp(c.findIndex(l=>l[0].includes(o)))}else{window.location=e.href}}}))})}function dp(n){let e=c[n][0],i=c[n][1][tk],o=c[n][1][pk];document.title=i,document.getElementsByTagName(t)[0].innerHTML=o,window.history.pushState({title:i,html:o},i,e)}window.onpopstate=function(n){let e=JSON.stringify(n.state);e!=="null"&&(e=JSON.parse(e),document.title=e[tk],document.getElementsByTagName(t)[0].innerHTML=e.html,a())},window.onload=function(){c.push([document.location.href,{x:document.title,y:document.getElementsByTagName(t)[0].innerHTML}]);let n=c[0][0],e=c[0][1][tk],i=c[0][1][pk];window.history.replaceState({title:e,html:i},e,n),a()};